# ------------------------------------------------------------------------
# 	Makefile for library files and directories of BLT library
# ------------------------------------------------------------------------

datadir =	@datadir@
datarootdir = 	@datarootdir@
exec_prefix =	@exec_prefix@
libdir =	@libdir@
prefix =	@prefix@
srcdir =	@srcdir@

version =	@BLT_VERSION@
so_prefix =	@BLT_SO_PREFIX@
so_ext =	@BLT_SO_EXT@
lib_suffix =	@BLT_LIB_SUFFIX@
pkgdir =	@BLT_LIBRARY@

INSTALL =	@INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_ROOT = 
RM =		rm -f
SHELL =		/bin/sh

cursors = 	treeview.xbm \
		treeview_m.xbm

WIN32 = 	@WIN32@
ifneq ("$(WIN32)", "")
cursors += 	treeview.cur
endif

miscFiles = \
		bltCanvEps.pro \
		bltGraph.pro \
		combobutton.tcl \
		comboentry.tcl \
		combomenu.tcl \
		combotree.tcl \
		dnd.tcl \
		dragdrop.tcl \
		graph.tcl \
		hierbox.tcl \
		scrollbar.tcl \
		scrollset.tcl \
		tabnotebook.tcl \
		tabset.tcl \
		treeview.tcl \
		tclIndex \
		$(cursors)

ddFiles =       dd-color.tcl \
		dd-file.tcl \
		dd-number.tcl \
		dd-text.tcl \
		tclIndex

instdirs =      $(prefix) $(exec_prefix) \
		$(libdir) $(prefix)/lib $(pkgdir) $(pkgdir)/dd_protocols

all: pkgIndex

pkgIndex: 
	rm -f pkgIndex.tcl
	sed -e 's/%VERSION%/$(version)/' $(srcdir)/pkgIndex.tcl.in | \
	sed -e 's/%SO_PREFIX%/$(so_prefix)/' | \
	sed -e 's/%LIB_SUFFIX%/$(lib_suffix)/' | \
	sed -e 's/%SO_EXT%/$(so_ext)/' | \
	sed -e 's;%LIB_DIR%;$(libdir);' > pkgIndex.tcl


install: mkdirs pkgIndex
	for i in $(ddFiles) ; do \
	    $(INSTALL_DATA) $(srcdir)/dd_protocols/$$i \
			$(INSTALL_ROOT)$(pkgdir)/dd_protocols ; \
	done 
	for i in $(miscFiles) ; do \
	    $(INSTALL_DATA) $(srcdir)/$$i $(INSTALL_ROOT)$(pkgdir) ; \
	done 
	$(INSTALL_DATA) pkgIndex.tcl $(pkgdir)

mkdirs:
	@for i in $(instdirs) ; do \
          if test -d $(INSTALL_ROOT)$$i ; then \
            : ; \
          else \
            echo " mkdir $(INSTALL_ROOT)$$i" ; \
            mkdir $(INSTALL_ROOT)$$i ; \
          fi ; \
        done

clean:
	$(RM) pkgIndex.tcl

distclean: clean
	$(RM) $(srcdir)/*.bak $(srcdir)/*\~ $(srcdir)/"#"* Makefile
